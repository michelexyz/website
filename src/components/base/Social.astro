---
interface Props {
  platform: string;
  username: string;
  bgColor?: string; // optional background color (hex, rgb, var, etc.)
  icon?: string; // optional icon filename in /public/icons, e.g. "github.svg"
}

const { platform, username, bgColor, icon } = Astro.props as Props;
const href = `https://www.${platform}.com/${username}`;
// If an icon is provided, force a dim white background for contrast with the logo
const baseBg = bgColor ?? 'var(--accent, #4c1d95)';
const resolvedBg = icon ? 'rgba(255,255,255,0.85)' : baseBg;
---

<a class="social" href={href} style={`--social-bg: ${resolvedBg}`}> 
  {icon ? (
    <img src={`/icons/${icon}`} alt={platform} width="18" height="18" loading="lazy" />
  ) : null}
  <span class="label">{platform}</span>
</a>

<style>
  .social {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    color: #000;
    background-color: var(--social-bg);
    text-decoration: none;
    border-radius: 0;
    border: 2px solid #000;
    line-height: 1;
  }
  .social:focus-visible {
    outline: 2px solid var(--nav-outline, #000);
    outline-offset: 2px;
  }
  .social img {
    display: block;
    width: 18px;
    height: 18px;
  }
  .label { text-transform: capitalize; }
</style>