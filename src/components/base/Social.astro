---
import '../../styles/buttons.css';

interface Props {
  platform: string;
  url: string;
  icon?: string; // optional icon filename in /public/icons, e.g. "github.svg"
  class?: string; // allow extra classes from parent
}

const { platform, url, icon, class: className, ...rest } = Astro.props as Props & Record<string, any>;
// Preserve explicit protocols (http/https/mailto/tel) and absolute/relative paths; otherwise prefix with https://
const href = /^(https?:|mailto:|tel:|\/)/.test(url) ? url : `https://${url}`;
// Background color now always comes from shared .btn styles (via CSS variables)
---
<a class={`btn social${className ? ' ' + className : ''}`} href={href} {...rest}> 
  {icon ? (
    <img src={`/icons/${icon}`} alt={platform} width="18" height="18" loading="lazy" />
  ) : null}
  <span class="label">{platform}</span>
</a>

<style>
  /* uses background from .btn */
  .social img {
    display: block;
    width: 18px;
    height: 18px;
  }
  .label {
    font-size: var(--font-2);
    font-weight: 500;
  } 
</style>