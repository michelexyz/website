---
import '../../styles/buttons.css';

interface Props {
  platform: string;
  url: string;
  Icon?: any; // optional SVG component
  class?: string; // allow extra classes from parent
}

const { platform, url, Icon, class: className, ...rest } = Astro.props as Props & Record<string, any>;
// Preserve explicit protocols (http/https/mailto/tel) and absolute/relative paths; otherwise prefix with https://
const href = /^(https?:|mailto:|tel:|\/)/.test(url) ? url : `https://${url}`;
---
<a class={`btn social${className ? ' ' + className : ''}`} href={href} {...rest}>
  {Icon ? (<Icon class="icon" aria-hidden="true"/>) : null}
  <span class="label">{platform}</span>
</a>

<style>
  /* uses background from .btn */
  .icon {width: 18px; height: 18px; }
  .label {
    font-size: var(--font-2);
    font-weight: 500;
  } 
</style>