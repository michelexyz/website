---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Sections from "../../components/feed/Sections.astro";

const pageTitle = "My Projects";
const allProjects = await getCollection("projects");
const topLevel = allProjects.filter(p => !p.slug.includes('/'));
---
<style></style>

<html lang="en">
  <BaseLayout pageTitle={pageTitle}>
    <p>Here are some of the projects I've worked on.</p>
    <Sections
      items={topLevel.map((project) => ({
        url: `/projects/${project.slug}/`,
        title: project.data.title,
        description: project.data.description,
        pubDate: project.data.pubDate,
        coverSrc: project.data.cover?.src,
      }))}
    />
  </BaseLayout>
</html>
