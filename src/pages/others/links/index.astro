---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import CompactGrid from "../../../components/feed/CompactGrid.astro";
import CompactCard from "../../../components/feed/CompactCard.astro";
import { getCollection } from "astro:content";

const pageTitle = "Links";
const entries = await getCollection('links');
// newest first
entries.sort((a: any, b: any) => (b.data.pubDate?.getTime?.() || 0) - (a.data.pubDate?.getTime?.() || 0));

const topLevel = entries.filter((e: any) => !e.slug.includes('/'));
---
<BaseLayout pageTitle={pageTitle}>
  <p>Things I recommend.</p>
  <CompactGrid  minWidth="14rem" gap="0.85rem">
    {topLevel.map((e: any) => (
      <CompactCard
        url={`${e.slug}/`}
        title={e.data.title}
        pubDate={e.data.pubDate}
        description={e.data.description}
        icon={e.data.icon}
      />
    ))}
  </CompactGrid>
</BaseLayout>
